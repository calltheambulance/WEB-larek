# Веб-ларёк

## Описание проекта

Веб-ларёк - это интернет-магазин с товарами для веб-разработчиков. В нём можно посмотреть каталог товаров, добавить товары в корзину и cделать заказ.

В проекте используется архитектура MVP, которая обеспечивает чёткое разделение ответственностей между классами Model и View.

### Стек технологий:

    HTML, SCSS, TS, Webpack

### Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с моделями и отображениями
- src/components/base/ — папка с базовыми компонентами

### Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Описание базовых классов

### Класс `Api` для взаимодействия с сервером.

Методы:

- `handleResponse` - обрабатывает ответ от сервера.
- `get` - принимает часть url, возвращает ответ от сервера.
- `post` - принимает часть url, принимает данные в виде объекта для отправки на сервер.

### Класс `EventEmitter` для обеспечения связи между моделями и отображениями.

Класс EventEmitter реализует паттерн «Observer», его методы позволяют устанавливать и снимать слушатели событий, вызвать слушатели при возникновении события.

Методы:

- `on` - для подписки на событие.
- `off` - для отписки от события.
- `emit` - уведомления подписчиков о наступлении события.
- `onAll` - для подписки на все события.
- `offAll` - для сброса всех подписчиков.
- `trigger` - генерирует заданное событие с заданными аргументами.

## Описание классов моделей

### Класс `ApiModel` для обработки запросов с получением товаров и оформлением заказов.

Методы:

- `getListProductCard` - получаем массив товаров с сервера.
- `postOrder` - получаем ответ от сервера по заказу.

### Класс `CartModel` для хранения товаров, положенных в корзину.

Методы:

- `getCounter` - возвращает количество товаров в корзине.
- `getTotalSumProducts` - считает и возвращает стоимость всех товаров в корзине в синапсах.
- `addToCart` - добавляет товар в корзину.
- `hasItem` - проверяет наличие товара к корзине.
- `deleteCardFromCart` - удаляет товар из корзины.
- `clearCartProducts` - очищает/удаляет все товары из корзины.

### Класс `CatalogModel` для хранения списка всех доступных товаров.

Метод:

- `setPreview` - получает данные карточки которую открыл пользователь.

### Класс `FormModel` для хранения контактной информации пользователя.

Методы:

- `setOrderAddress` - сохраняет адрес пользователя.
- `validateOrder` - проверяет адрес пользователя и способ оплаты.
- `setOrderContacts` - сохраняет номер телефона и почту пользователя.
- `validateContacts` - проверяет номер телефона и почту пользователя.
- `getOrder` - возвращает объект данных пользователя с выбранными товарами.

## Описание классов отображения

### Класс `CartView` для управления отображением корзины.

Методы:

- `renderCartItemsCounter` - сохраняет и устанавливает количество товаров, которое находится в корзине.
- `renderTotalSumProducts` - сохраняет и устанавливает сумму синапсов всех товаров в корзине.
- `renderCards` - создаёт отображения товаров в корзине.

### Класс `CartItemView` для управления отображением товаров в корзине.

Метод:

- `getPriceText` - принимает цену продукта в числовом значении и возвращает в строчном.

### Класс `CardView` для управления отображением карточки товара.

Методы:

- `setText` - принимает два значения, первое HTMLElement, второе значение задаёт текстовое содержимое HTMLElement.
- `cardCategory` - принимает строчное значение и создаёт новый className для HTMLElement.
- `setPrice` - принимает цену продукта в числовом значении и возвращает в строчном.

### Класс `DetailedCardView` для управления отображением подробного описания карточки товара, позволяет добавить карточку в корзину.

Метод:

- `setButtonState` - принимает текст кнопки и блокирует её при необходимости.

### Класс `FormOrderView` для управления отображением формы с адресом и способом оплаты.

### Класс `FormContacts` для управления отображением формы контактной информации пользователя.

### Класс `ModalView` для управления отображением модальных окон.

Методы:

- `open` - отображает модальное окон.
- `close` - закрывает модальное окно.

### Класс `Success` управляет отображением удачного заказа в модальном окне.

## Ключевые интерфейсы

### IProductItem

Описывает структуру товара в каталоге.

- id: string : Уникальный идентификатор товара.
- description: string : Описание товара.
- image: string : URL изображения товара.
- title: string : Название товара.
- category: string : Категория товара.
- price: number | null : Цена товара.

### IOrderForm

Описывает информацию о доставке заказа.

- payment: string : Выбранный способ оплаты.
- address: string : Адрес доставки.
- phone: string : Телефон клиента.
- email: string : Электронная почта клиента.
- total: string | number : Общая стоимость заказа.

### IOrder

Описывает структуру заказа, объединяя информацию формы заказа с товарами из корзины.

- items: string[] : Массив идентификаторов товаров в заказе.
- total: number : Общая стоимость заказа.

### IOrderResult

Описывает результат обработки заказа на сервере.

- id: string : Уникальный идентификатор заказа.
- total: number : Общая стоимость заказа.

### FormErrors

Описывает возможные ошибки валидации формы заказа. Является частичной записью (Partial<Record<keyof IOrderForm, string>>).

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Проет на GitHub Pages

С готовой версией проекта можно ознакомиться по следующей ссылке: [Web-Larek на GitHub Pages](https://dmitriymarmazeev.github.io/web-larek/).
